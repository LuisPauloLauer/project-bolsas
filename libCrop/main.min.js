$(function(){"use strict";var e=window.console||{log:function(){}},t=$("body");$('[data-toggle="tooltip"]').tooltip(),$.fn.tooltip.noConflict(),t.tooltip(),function(){var o=$(".img-container > img"),a=$(".docs-actions"),r=($("#download"),$("#dataX")),p=$("#dataY"),n=$("#dataHeight"),c=$("#dataWidth"),i=$("#dataRotate"),d=$("#dataScaleX"),l=$("#dataScaleY"),s={aspectRatio:4/3,crop:function(e){r.val(Math.round(e.x)),p.val(Math.round(e.y)),n.val(Math.round(e.height)),c.val(Math.round(e.width)),i.val(e.rotate),d.val(e.scaleX),l.val(e.scaleY)}};$('[data-toggle="tooltip"]').tooltip(),o.on({"build.cropper":function(t){e.log(t.type)},"built.cropper":function(t){e.log(t.type)},"cropstart.cropper":function(t){e.log(t.type,t.action)},"cropmove.cropper":function(t){e.log(t.type,t.action)},"cropend.cropper":function(t){e.log(t.type,t.action)},"crop.cropper":function(t){e.log(t.type,t.x,t.y,t.width,t.height,t.rotate,t.scaleX,t.scaleY)},"zoom.cropper":function(t){e.log(t.type,t.ratio)}}).cropper(s),$.isFunction(document.createElement("canvas").getContext)||$('button[data-method="getCroppedCanvas"]').prop("disabled",!0),"undefined"==typeof document.createElement("cropper").style.transition&&($('button[data-method="rotate"]').prop("disabled",!0),$('button[data-method="scale"]').prop("disabled",!0)),$(".docs-toggles").on("change","input",function(){var e,t,a=$(this),r=a.attr("name"),p=a.prop("type");o.data("cropper")&&("checkbox"===p?(s[r]=a.prop("checked"),e=o.cropper("getCropBoxData"),t=o.cropper("getCanvasData"),s.built=function(){o.cropper("setCropBoxData",e),o.cropper("setCanvasData",t)}):"radio"===p&&(s[r]=a.val()),o.cropper("destroy").cropper(s))}),a.on("click","[data-method]",function(){var t,a,r=$(this),p=r.data();if(!r.prop("disabled")&&!r.hasClass("disabled")&&o.data("cropper")&&p.method){if(p=$.extend({},p),"undefined"!=typeof p.target&&(t=$(p.target),"undefined"==typeof p.option))try{p.option=JSON.parse(t.val())}catch(n){e.log(n.message)}switch(a=o.cropper(p.method,p.option,p.secondOption),p.method){case"getCroppedCanvas":if(a){e.log(a);var c=new THREE.Texture;c.image=a,c.needsUpdate=!0;var i=new THREE.MeshLambertMaterial({map:c,emissive:328965});ChangeTexture(selezione[0],i),$.post("libCrop/crop.php",{data:a.toDataURL()},function(e){$("#cropResult").val(e)})}}if($.isPlainObject(a)&&t)try{t.val(JSON.stringify(a))}catch(n){e.log(n.message)}}}),t.on("keydown",function(e){if(o.data("cropper")&&!(this.scrollTop>300))switch(e.which){case 37:e.preventDefault(),o.cropper("move",-1,0);break;case 38:e.preventDefault(),o.cropper("move",0,-1);break;case 39:e.preventDefault(),o.cropper("move",1,0);break;case 40:e.preventDefault(),o.cropper("move",0,1)}});var u,g=$("#inputImage"),h=window.URL||window.webkitURL;h?g.change(function(){var e,a=this.files;o.data("cropper")&&a&&a.length&&(e=a[0],/^image\/\w+$/.test(e.type)?(u=h.createObjectURL(e),o.one("built.cropper",function(){h.revokeObjectURL(u)}).cropper("reset").cropper("replace",u),g.val("")):t.tooltip("Please choose an image file.","warning"))}):g.prop("disabled",!0).parent().addClass("disabled")}()});